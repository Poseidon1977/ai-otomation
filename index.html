<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self' 'unsafe-inline' 'unsafe-eval' *; script-src 'self' 'unsafe-inline' 'unsafe-eval' *; style-src 'self' 'unsafe-inline' *; img-src 'self' data: *; connect-src 'self' ws: wss: *;">
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="mobile-web-app-capable" content="yes">
  <style>
    :root {
      --bg-dark: #0A0A0B;
    }

    html,
    body {
      background-color: var(--bg-dark);
      margin: 0;
      padding: 0;
      width: 100%;
      min-height: 100%;
      overflow-x: hidden;
    }

    #root {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      padding-bottom: env(safe-area-inset-bottom);
    }
  </style>
  <title translate="no">AI AutomatioN</title>
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#0A0A0B">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="AI Auto">
</head>

<body>
  <div id="root"></div>
  <script type="module" src="/src/main.jsx"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js');
      });
    }

    // Emergency Diagnostic: Detect empty root
    setTimeout(() => {
      const root = document.getElementById('root');
      if (root && root.innerHTML === "") {
        console.error("Diagnostic: Root is still empty after 3s.");
        const msg = document.createElement('div');
        msg.style.cssText = "position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background: white; color: black; padding: 40px; border-radius: 20px; text-align: center; border: 5px solid red; z-index: 10000; box-shadow: 0 0 100px rgba(0,0,0,0.5); font-family: sans-serif;";
        msg.innerHTML = `<h2 style="color:red; margin-top:0;">ACİL DURUM TEŞHİSİ / EMERGENCY ERROR</h2>
                             <p>Uygulama yüklenemedi. Lütfen Console'daki hataları kontrol edin.</p>
                             <p style="font-size: 14px; color: #666;">Hata kodunu kopyalayıp asistana iletin.</p>
                             <div style="background:#eee; padding:10px; border-radius:5px; margin-top:10px; font-weight:bold;">
                                Sebep: React Mount Failed or Script Blocked
                             </div>`;
        document.body.appendChild(msg);
      }
    }, 3000);
  </script>
</body>

</html>